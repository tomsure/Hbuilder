<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		<button id="btn">点击显示</button>
		<ul id="ul1">
			
		</ul>
	</body>
	<script type="text/javascript">
	   var btn=document.getElementById("btn")
	    var ul1=document.getElementById("ul1")
		var xhr;
		if(window.XMLHttpRequest){
			xhr=new XMLHttpRequest()
		}else{
			xhr=new ActiveXObject('Microsoft.XMLHTTP')
		}
		  btn.onclick=function(){
		  	xhr.onreadystatechange=function(){
			if(xhr.readyState==4){
				if(xhr.status==200){
				//	alert(xhr.responseText)//接收到的响应数据是字符串

				//	alert(eval(xhr.responseText) instanceof Array)//通过eval解析之后得到的是一个数组;
					var arr=eval(xhr.responseText)
				//	alert(arr[0].user)//由于这个数组中的几个元素都是json格式的数据，所以可以读取到json里的值
                   /******获取到json的值以后，可以创建列表，但是由于在实际开发中数据量会非常大，所以需要通过遍历的方式来获取json的值*****/
                  for(var i=0;i<=arr.length-1;i++){
                  //	   alert(arr[i].user)//会弹出每一个user的值
                  var oli=document.createElement('li');//利用DOM创建li
                  oli.innerHTML='用户名：'+arr[i].user+'密码：'+arr[i].passwd
                  //将li的内容设置为
                   ul1.appendChild(oli)//将创建的元素追加到ul1
                  }
                }
				}
			} 
			
		
		xhr.open('GET','利用ajax和eval动态创建.txt',true)
		xhr.send(null)
		
		  }
		
		
//		eval()方法可以读取服务器返回的响应数据,将相应数据解析成数组,json等等数据

     /*  知识点总结:
          ajax动态创建列表需要如下步骤;
          0,在html中创建ul元素;
          1,创建xhr对象;
          2,在onreadrstatechange事件函数中通过eval函数解析接收到的响应文件;
          3,如果是用户名和密码类似类型的列表,eval会将文件解析成数组,二数组中的元素就是json格式,所以 可以通过访问数组的元素
          4,创建一个for循环,在循环中创建一个li元素,将这个创建的li元素的innerhtml设置为eval函数解析的响应数据;
          5,将创建的li追加到ul中  */
       //以上步骤是或去远程数据动态创建列表的大概步骤，具体可以参考上面代码

        /*  ajax动态创建列表所涉及主要知识点:
          1,ajax对象创建;
          2,eval()函数;
          3,for循环;
          4,DOM动态创建元素
         */
	</script>
</html>
